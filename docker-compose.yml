services:
  audio-app:
    build:
      context: ./audio # Path to the directory containing your Dockerfile
    environment:
      DISPLAY: "${DISPLAY}"
      PULSE_SERVER: "unix:${XDG_RUNTIME_DIR}/pulse/native"
    devices:
      - "/dev/snd:/dev/snd" # Pass audio device
    volumes:
      - "${XDG_RUNTIME_DIR}/pulse/native:${XDG_RUNTIME_DIR}/pulse/native"
      - "/etc/machine-id:/etc/machine-id"
      - "/run/dbus:/run/dbus"
    network_mode: "host" # Use host networking for low-latency audio
    privileged: true # Allow privileged access for audio devices

  telegram-bot:
    build:
      context: ./project-telegram-bot
    container_name: telegram_bot
    restart: unless-stopped

  vite-project:
    build:
      context: ./vite-project
    container_name: vite_project
    restart: unless-stopped
    ports:
      - "3000:80"
